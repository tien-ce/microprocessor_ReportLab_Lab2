/*
 * matrix8x8_led.c
 *
 *  Created on: Sep 21, 2024
 *      Author: thuyh
 */

#include "matrix8x8_led.h"
const int MAX_LED_MATRIX = 8;
int index_led_matrix = 0;
uint8_t matrix_buffer[8] = {0x00, 0x0FC, 0x0A, 0x09, 0x09, 0x0A, 0x0FC, 0x00};

void updateLEDMatrix (GPIO_TypeDef* GPIOx,uint16_t Pin0,uint16_t Pin1,uint16_t Pin2,uint16_t Pin3,uint16_t Pin4
		,uint16_t Pin5,uint16_t Pin6,uint16_t Pin7,int index ) {
    switch (index) {
        case 0:
        	HAL_GPIO_WritePin(GPIOx, Pin0, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 1:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 2:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 3:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 4:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 5:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 6:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, RESET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, SET);
            break;
        case 7:
        	HAL_GPIO_WritePin(GPIOx, Pin0, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin1, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin2, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin3, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin4, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin5, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin6, SET);
        	HAL_GPIO_WritePin(GPIOx, Pin7, RESET);
            break;
        default:
            break;
    }
}
void updateRowLEDMatrix (GPIO_TypeDef* GPIOx,uint16_t Pin0,uint16_t Pin1,uint16_t Pin2,uint16_t Pin3,uint16_t Pin4
		,uint16_t Pin5,uint16_t Pin6,uint16_t Pin7,int index ){
    uint8_t value = matrix_buffer[index];
    HAL_GPIO_WritePin(GPIOx, Pin0, !(value & 0x01) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin1, !(value & 0x02) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin2, !(value & 0x04) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin3, !(value & 0x08) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin4, !(value & 0x10) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin5, !(value & 0x20) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin6, !(value & 0x40) ? SET : RESET);
    HAL_GPIO_WritePin(GPIOx, Pin7, !(value & 0x80) ? SET : RESET);
}
